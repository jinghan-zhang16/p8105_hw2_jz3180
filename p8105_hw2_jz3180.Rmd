---
title: "Homework 2"
author: Jinghan Zhang
date: September 24, 2020
output: github_document
---

## Problem 1

```{r setup}
library(tidyverse)
library(readxl)
```

Read the Mr. Trashwheel dataset.

```{r data cleaning}
trashwheel_df =
  read_xlsx("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
    sports_balls = round(sports_balls),
    sport_balls = as.integer(sports_balls)
  )
```

Read precipitation data.

```{r}
precip_2018 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip =1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2018) %>%
  relocate(year)

precip_2017 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    skip =1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2017) %>%
  relocate(year)
```

Now combine annual precipitation.

```{r}
month_df = 
  tibble(
    month_num = 1:12,
    month_name = month.name
  )

#precip_df = bind_rows(precip_2018, precip_2017) 
#left_join(precip_df, month_df, by = "month") 
```

This dataset contains information from the Mr. Trashwheel trash collector in Baltimore, Maryland. As trash enters the inner harbor, the trashwheel collects that trash, and stores it in a dumpster. The dataset contains information on year, month, and trash collected, including some specific types of trash. There are a total of `r ` rows in our final dataset. Additional data sheets include month precipitation data. 

## Problem 2

```{r}
nyc_transit = read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  unite(route, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, sep = "/", na.rm = TRUE) %>%
  select('line', 'station_name', 'station_latitude', 'station_longitude', 'route', 'entry', 'vending', 'entrance_type', 'ada') %>%
  mutate(entry = ifelse(entry == "YES", TRUE, FALSE))

# dimensions of dataset
nrow(nyc_transit)
ncol(nyc_transit)

# number of distinct stations
select(nyc_transit, station_name, route) %>%
  distinct() %>%
  nrow()

# number of stations that are ADA compliant
select(nyc_transit, station_name, route, ada) %>%
  distinct() %>%
  filter(ada == TRUE) %>%
  nrow()

# number of entrances/exits without vending that allow entrance
filter(nyc_transit, vending == "NO") %>%
  filter(entry) %>%
  nrow()

# number of entrances/exits without vending
filter(nyc_transit, vending == "NO") %>%
  nrow()

```

This dataset contains information about NYC's subway entrances and exits. Each row of the raw dataset refers to an individual station entrance or exit. The raw dataset includes columns for the division, line, station name, station longitude/latitude, routes, entrance type, whether entry was allowed, e

```{r}
pols_month = read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, c("year", "month", "day"), sep="-") %>%
  mutate(month = recode(month,
    "01" = "January",
    "02" = "February",
    "03" = "March",
    "04" = "April",
    "05" = "May",
    "06" = "June",
    "07" = "July",
    "08" = "August",
    "09" = "September",
    "10" = "October",
    "11" = "November",
    "12" = "December",
  )) %>%
  mutate(president = ifelse(prez_dem == 1, "dem", "gop")) %>%
  select(-day, -prez_gop, -prez_dem)

snp = read_csv("./data/fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, c("month", "day", "year"), sep="/") %>%
  mutate(month = recode(month,
    "1" = "January",
    "2" = "February",
    "3" = "March",
    "4" = "April",
    "5" = "May",
    "6" = "June",
    "7" = "July",
    "8" = "August",
    "9" = "September",
    "10" = "October",
    "11" = "November",
    "12" = "December",
  )) %>%
  select(year, month, -day, close)

employment = read_csv("./data/fivethirtyeight_datasets/unemployment.csv") %>%
  janitor::clean_names() %>%
  pivot_longer(!year, names_to = "month", values_to = "unemployment") %>%
  mutate(month = recode(month,
    "jan" = "January",
    "feb" = "February",
    "mar" = "March",
    "apr" = "April",
    "may" = "May",
    "jun" = "June",
    "jul" = "July",
    "aug" = "August",
    "sep" = "September",
    "oct" = "October",
    "nov" = "November",
    "dec" = "December",
  ))

merged = merge(pols_month, snp) %>%
  merge(employment)

nrow(merged)
ncol(merged)

```

The first dataset gave the breakdown of political representatives in the senate, house, governor, and presidential positions by republican versus democratic party per month starting from 1947. The second dataset gave what appeared to be monthly market closing data starting from 2015 and then going back until 1950. The third dataset gave yearly unemployment data by month from 1948 to 2015. The final dataset consisted of 786 rows where each row was data for a month, starting from ___ and ending at ___. The data ___
